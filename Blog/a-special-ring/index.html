<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=description content="a special ring I decided to make a special ring for my proposal to my girlfriend.
The final result: It boasts a STM32WB55CU microcontroller, attached to a separate Bluetooth antenna."><title>a special ring
</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://www.brendanang.dev//icon.png><link href=https://www.brendanang.dev/styles.c6adaa3b473914a38283f492dfdbcb76.min.css rel=stylesheet><link href=https://www.brendanang.dev/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://www.brendanang.dev/js/darkmode.f4d43c22d05773345705b5a308888af6.min.js></script><script src=https://www.brendanang.dev/js/util.fa8e74b4065b97e6980a72cc472e436f.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script><script src=https://unpkg.com/@floating-ui/core@0.7.3></script><script src=https://unpkg.com/@floating-ui/dom@0.5.4></script><script src=https://www.brendanang.dev/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script><script src=https://www.brendanang.dev/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script><script src=https://www.brendanang.dev/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script><script src=https://www.brendanang.dev/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script><script>const SEARCH_ENABLED=!1,PRODUCTION=!0,BASE_URL="https://www.brendanang.dev/",fetchData=Promise.all([fetch("https://www.brendanang.dev/indices/linkIndex.84a6714a5001f23f619a6012b456b34d.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://www.brendanang.dev/indices/contentIndex.61de53cbb96862628149d53bfdffe9d4.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://www.brendanang.dev",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://www.brendanang.dev",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{"’":"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/www.brendanang.dev\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script><script defer src=https://www.brendanang.dev/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://www.brendanang.dev/>Brendan Ang</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg>
</label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>a special ring</h1><p class=meta>Last updated
Sep 5, 2025
<a href=https://github.com/bbawj/site/Blog/a%20special%20ring.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#choice-of-display>Choice of display</a></li><li><a href=#mcu>MCU</a></li></ol><ol><li><a href=#low-power-mode>Low power mode</a></li><li><a href=#flex-design>Flex design</a></li></ol></nav></details></aside><a href=#a-special-ring><h1 id=a-special-ring><span class=hanchor arialabel=Anchor># </span>a special ring</h1></a><p>I decided to make a special ring for my proposal to my girlfriend.</p><p>The final result:
<img src=https://www.brendanang.dev//Pics/ring.gif width=auto alt=200>
It boasts a STM32WB55CU microcontroller, attached to a separate Bluetooth antenna. A magnetic charging port for a 18mAh battery. And most importantly a whopping 128x128 resolution 1 bit monochrome display all encased in transparent plastic. Amazing.</p><p>Here are the planning notes I wrote down at the start of this project. You can clearly tell that i do not know&mldr;</p><a href=#what-am-i-doing><h1 id=what-am-i-doing><span class=hanchor arialabel=Anchor># </span>&mldr;what am i doing</h1></a><p>Lets not get carried away. We need:</p><ul><li><input disabled type=checkbox> THE ACTUAL FKING RING</li><li><input disabled type=checkbox> A PHOTOGRAPHER??</li><li><input disabled type=checkbox> my own ring</li></ul><a href=#choice-of-display><h2 id=choice-of-display><span class=hanchor arialabel=Anchor># </span>Choice of display</h2></a><p>The main advantage of electronic paper displays (EPD) is that there is no power consumption when displaying a static image.</p><ul><li><p>So if we want to use it to display the time it is a lil waste as it will have to keep refreshing. More efficient to use a LCD segment display</p></li><li><p>Apparently, there is such thing as memory LCDs which are very low powered although needing constant power (the bit can retain but requires an oscillating freq to prevent the bit from getting stuck)</p><ul><li><a href=https://www.sharpsde.com/products/displays/memory-lcd/ rel=noopener>https://www.sharpsde.com/products/displays/memory-lcd/</a></li></ul></li><li><p>Does the display wrap around the whole ring? Or just a small squarish one in the center?</p><ul><li>Flexible EPD:<ul><li>1.02 inch GDEW0102I4FC:
<a href="https://www.good-display.com/public/html/pdfjs/viewer/viewernew.html?file=https://v4.cecdn.yun300.cn/100001_1909185148/GDEW0102I4FC.pdf" rel=noopener>https://www.good-display.com/public/html/pdfjs/viewer/viewernew.html?file=https://v4.cecdn.yun300.cn/100001_1909185148/GDEW0102I4FC.pdf</a></li><li><input disabled type=checkbox> Check that the EPD can flex around finger</li></ul></li><li>Tiny Memory LCD:<ul><li><input disabled type=checkbox> 1 inch LCD from Sharp:
<a href=https://www.aliexpress.com/item/1005006120421610.html rel=noopener>https://www.aliexpress.com/item/1005006120421610.html</a></li></ul></li></ul></li></ul><a href=#mcu><h2 id=mcu><span class=hanchor arialabel=Anchor># </span>MCU</h2></a><p>Do we need an MCU?? If we just want to display static EPD, we can preflash and put inside but if we wanna do more dynamic stuff&mldr;</p><ul><li>How to charge it?<ul><li><input disabled type=checkbox> Tiny Lith-ion battery?<ul><li>How to charge that??<ul><li>Wired? then we need to expose some USB-c connector? Thats not ideal</li><li>Some exposed copper that can connect to a charging dock like the earphones?</li><li>Wireless? Can coil around the ring itself<ul><li>10mm coil
<a href=https://www.aliexpress.com/item/33047481327.html rel=noopener>https://www.aliexpress.com/item/33047481327.html</a></li><li>PTX130W SoC</li></ul></li></ul></li></ul></li></ul></li><li><input disabled type=checkbox> Check what MCU can drive the display<ul><li>EFM32:<ul><li><a href=https://www.silabs.com/documents/public/application-notes/an0057.1-efm32-segment-lcd.pdf rel=noopener>https://www.silabs.com/documents/public/application-notes/an0057.1-efm32-segment-lcd.pdf</a></li><li><a href=https://www.silabs.com/documents/public/application-notes/an0047-efm32-graphical-display.pdf rel=noopener>https://www.silabs.com/documents/public/application-notes/an0047-efm32-graphical-display.pdf</a></li><li><a href=https://github.com/ryankurte/efm32-base rel=noopener>https://github.com/ryankurte/efm32-base</a></li></ul></li><li>SAML22 (SensorWatch MCU):<ul><li><a href=https://ww1.microchip.com/downloads/en/DeviceDoc/60001465A.pdf rel=noopener>https://ww1.microchip.com/downloads/en/DeviceDoc/60001465A.pdf</a></li></ul></li><li>STM32L series:<ul><li>Loads of features, RTC, peripherals, LCD driver</li><li>file:///home/bawj/Downloads/stm32l443rc.pdf</li></ul></li></ul></li><li>What features do we want<ul><li>Pressure/Light sensor? Can be used to trigger something when the ring is worn</li></ul></li><li><input disabled type=checkbox> How to flash the MCU?<ul><li>SWD interface: serial wired debugger is a 4pin connector</li><li>UF2: driver-less flashing (drag and drop BIN file for the onboard UF2 bootloader used by projects like SensorWatch)</li></ul></li></ul><a href=#the-design><h1 id=the-design><span class=hanchor arialabel=Anchor># </span>The design</h1></a><p>For a &ldquo;wearable&rdquo; ring, the mechanical and physical constraints would ultimately decide what I could and could not put on the board. Doing some research into commercial smart rings, I came across flex PCBs which would allow components to be placed on segments of stiff material separated by flexible connectors for wiring.
<a href="https://youtu.be/P51te12Oux4?si=Kei9cyyXTkRTZ2kY" rel=noopener>Carl Bugeja</a> also has a bunch of cool projects working with this PCB substrate.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250907012708.png width=auto alt>
Credits: iFixit Oura Ring 2 Teardown</p><p>These smart rings would also contain curved batteries in order to fit the finger. In the end I managed to source these 18mAh batteries from Alibaba. Although their curve radius was not as tight as I would like in order to fit her smaller fingers, these were the best off the shelf I could find. Plus, I also learnt that there is an entire industry that makes custom curved batteries of different angles and capacity.</p><p>Later I found that making flex PCBs were prohibitively more expensive. This is because manufacturers would need to make use of custom fixtures to hold the PCB in place for assembly. Overall it meant that the cost to make one is about twice that of a normal PCB.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908180050.png width=auto alt=350>
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908214413.png width=auto alt=350>
In the end, I went with the standard fixed PCBs, which quickly put an end to my dreams of making a completely ring-shaped ring. Another issue independent of the ringness is how to assemble all the components in a simple manner. For commercial smart rings these were often shaped and then encased in resin. This is a plausible option given that resin printers, UV curers are quite consumer friendly. I decided that this was not the path I wanted to take for now, and went with a lidded design, turning my ring into yet another electronics box.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250907012258.png width=auto alt>
Also my first time doing any CAD, I went with
<a href=https://www.onshape.com rel=noopener>onshape</a> for their accessible web interface. One of the main issues is designing the closing latch. Following this succinct
<a href="https://www.youtube.com/watch?v=SvI8qrdAr1w" rel=noopener>tutorial</a> with some guesswork helped me to create a passable annular joint for the lid.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908180110.png width=auto alt>
Another aspect of the design is figuring out where and how to charge the battery without having to remove the whole thing. The straight edges arising from the curved part was for this purpose. I cut a hole in order to fit a tiny magnetic charging connector.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908225412.png width=auto alt=400></p><a href=#pcb><h1 id=pcb><span class=hanchor arialabel=Anchor># </span>PCB</h1></a><p>This would be my first time designing a custom PCB. From my earlier requirements, I decided to use a STM32WB series MCU which had bluetooth capabilities for remote control. This may have also been partly motivated by the great
<a href="https://youtu.be/nkHFoxe0mrU?si=Z5-QgLxbu_dnPT5j" rel=noopener>tutorial</a> series by Phil over on Phil&rsquo;s lab. He provides a detailed walkthrough of the necessary components required to bring up the chip such as the power supplies, crystal oscillator and RF impedance matching circuit. His videos really allowed me to get the board right the first try.</p><p>One of the main challenges of this board was the battery charging circuit. A charge controller which provides a safe charging voltage and current. A battery monitor to prevent over and under-discharge of the battery during operation. A way to source power from the charger instead of the battery during charging. This is greatly simplified by a multitude of ICs that offer a single package for everything. However, for the battery specification that I required, there was no such magic chip.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908220322.png width=auto alt>
The charging schematic focused on getting close to the 1C charge rating for the battery. Please @ me if you notice any safety issues besides eye strain from the charging LED. (aside: for some reason I found that the over discharge protection does not seem to work)
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908235202.png width=auto alt></p><p><img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908220845.png width=auto alt>
The display was simple enough to interface with. The peculiar thing is the LPTIM1_OUT signal to the MCU, which provided the minimum 1hz wave to refresh the memory display bits.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908235125.png width=auto alt=300>
The programming setup is a SWD pogo clip.</p><a href=#regrets><h1 id=regrets><span class=hanchor arialabel=Anchor># </span>Regrets</h1></a><p>I rushed the project as other parts of the proposal started to pile up. Here is a list of improvements I would have done. Either way, I learnt a lot during this project and its a testament to what you can do with a little will and too much youtube.</p><a href=#low-power-mode><h2 id=low-power-mode><span class=hanchor arialabel=Anchor># </span>Low power mode</h2></a><p>Earlier I showed the use of LPTIM for generating the square wave. I had low power consumption in mind when deciding on that. From my early plans, I also hinted at finding a way to detect when the ring is worn. This would have allowed the STM32 to stay in sleep while there was no interaction.</p><p>One complication is the different low power modes available. These are quite well documented with the shutdown mode being the best in terms of power consumption.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020250908222026.png width=auto alt>In practice, its likely Standby which one can reasonably hope to stay in.</p><p>Some ways I thought to achieve this were:</p><ul><li>Capacitive touch sensor. The STM32 has a few pins dedicated for its touch sensing controller. Soldering a large copper strip would allow wake up from low power sleep mode only.</li><li>Gyroscope accelerometer combo. A classic option that would not be able to detect when ring is worn, but at least it could still be used to tell when it has been put down.</li><li>Here some chips even allow for wake up from the RF system. The STM32WB55 that I went with did not support this (why did I not just use a different chip?????? I don&rsquo;t know).</li></ul><p>In the end I made the genius decision to do none of them. I can&rsquo;t remember why, but it made it impractical, needing a new charge (sometimes from a portable charger) before being able to showcase it&rsquo;s functionalities.</p><a href=#flex-design><h2 id=flex-design><span class=hanchor arialabel=Anchor># </span>Flex design</h2></a><p>For it to be actually wearable I believe one cannot escape flex PCBs. This could itself bring about an entire new host of mechanical strain issues. Furthermore, the resin encasement would probably mean the whole thing became e-waste once the battery died. However, such a design would also likely require an onboard chip antenna, something I did not know about.</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://www.brendanang.dev/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Brendan Ang using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2025</p><ul><li><a href=https://www.brendanang.dev/>Home</a></li><li><a href=https://github.com/bbawj>Github</a></li></ul></footer></div></div></body></html>