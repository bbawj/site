<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=description content="Link Layer The link layer is responsible for data transfer between nodes over links.
Nodes: hosts/routers/switches/access points Links: communication channel which connects the nodes, such as broadcast channels (used by WiFi) or point-to-point (used by Ethernet) Link layer protocol: can be thought as the &ldquo;mode of transport&rdquo; such as either Ethernet or WiFi Difference between Network Layer and link layer: the network layer finds to best route for the datagram while the link layer provides the actual transportation."><title>Link Layer
</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://www.brendanang.dev//icon.png><link href=https://www.brendanang.dev/styles.c6adaa3b473914a38283f492dfdbcb76.min.css rel=stylesheet><link href=https://www.brendanang.dev/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://www.brendanang.dev/js/darkmode.f4d43c22d05773345705b5a308888af6.min.js></script><script src=https://www.brendanang.dev/js/util.fa8e74b4065b97e6980a72cc472e436f.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script><script src=https://unpkg.com/@floating-ui/core@0.7.3></script><script src=https://unpkg.com/@floating-ui/dom@0.5.4></script><script src=https://www.brendanang.dev/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script><script src=https://www.brendanang.dev/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script><script src=https://www.brendanang.dev/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script><script src=https://www.brendanang.dev/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script><script>const SEARCH_ENABLED=!1,PRODUCTION=!0,BASE_URL="https://www.brendanang.dev/",fetchData=Promise.all([fetch("https://www.brendanang.dev/indices/linkIndex.3b821336bb0d2a72afc0299da481936f.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://www.brendanang.dev/indices/contentIndex.bc69868acf44b7310b194fc57c4e2532.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://www.brendanang.dev",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://www.brendanang.dev",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{"’":"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/www.brendanang.dev\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script><script defer src=https://www.brendanang.dev/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://www.brendanang.dev/>Brendan Ang</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Link Layer</h1><p class=meta>Last updated
Feb 26, 2023
<a href=https://github.com/bbawj/site/Notes/Link%20Layer.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#multiple-access-problem>Multiple Access Problem</a><ol><li><a href=#channel-partitioning-protocols>Channel Partitioning Protocols</a></li><li><a href=#random-access-protocols>Random Access Protocols</a></li><li><a href=#taking-turns>Taking turns</a></li></ol></li><li><a href=#link-layer-addressing>Link layer addressing</a><ol><li><a href=#address-resolution-protocol-arp>Address Resolution Protocol (ARP)</a></li></ol></li><li><a href=#link-layer-protocols>Link Layer Protocols</a><ol><li><a href=#ethernet>Ethernet</a></li></ol></li><li><a href=#link-layer-switches>Link Layer Switches</a><ol><li><a href=#forwarding-and-filtering>Forwarding and filtering</a></li></ol></li></ol></nav></details></aside><a href=#link-layer><h1 id=link-layer><span class=hanchor arialabel=Anchor># </span>Link Layer</h1></a><p>The link layer is responsible for data transfer between <em>nodes</em> over <em>links</em>.</p><ul><li>Nodes: hosts/routers/switches/access points</li><li>Links: communication channel which connects the nodes, such as broadcast channels (used by WiFi) or point-to-point (used by Ethernet)</li><li>Link layer protocol: can be thought as the &ldquo;mode of transport&rdquo; such as either Ethernet or WiFi
<em>Difference between
<a href=/Notes/Network-Layer/ rel=noopener class=internal-link data-src=/Notes/Network-Layer/>Network Layer</a> and link layer: the network layer finds to best route for the datagram while the link layer provides the actual transportation.</em></li></ul><p><em>Where is it implemented?</em>: usually in a Network Interface Card (NIC), which contains the hardware to send datagrams to the link, and also software in terms of the controller which bridges the interface between the host CPU and hardware.</p><a href=#multiple-access-problem><h2 id=multiple-access-problem><span class=hanchor arialabel=Anchor># </span>Multiple Access Problem</h2></a><p>How to coordinate the access of multiple sending and receiving nodes to a shared link? The link layer implements multiple access protocols.</p><a href=#channel-partitioning-protocols><h3 id=channel-partitioning-protocols><span class=hanchor arialabel=Anchor># </span>Channel Partitioning Protocols</h3></a><p>Partition the broadcast channel&rsquo;s bandwidth among nodes sharing the channel.
<img src=https://i.imgur.com/jr4iOiA.png width=auto alt=500></p><ul><li><strong>Time-division multiplexing</strong> (TDM) splits up time into time frames with each frame split amongst the nodes. Each node is allowed to transmit during this time.</li><li><strong>Frequency-division multiplexing</strong> (FDM): splits up bandwidth into available frequencies. Each node takes 1 frequency for transmission
Problem: what if only 1 node wants to transmit something? For a link bandwidth R, it is capped at R/N bps.</li><li><strong>Code division multiple access</strong> (CDMA): assign each node a unique code used to encode the data. Each node can transmit simultaneously and the receiver can use the code to determine the sender.</li></ul><a href=#random-access-protocols><h3 id=random-access-protocols><span class=hanchor arialabel=Anchor># </span>Random Access Protocols</h3></a><p>Each node transmit at full rate, when a collision occurs, independently choose a random delay before retransmission. Probable for the node to <em>sneak</em> in its packet.</p><a href=#carrier-sense-multiple-access-collision-detection-csmacd><h4 id=carrier-sense-multiple-access-collision-detection-csmacd><span class=hanchor arialabel=Anchor># </span>Carrier Sense Multiple Access Collision Detection (CSMA/CD)</h4></a><p>Rather than independently making a decision:</p><ul><li>Carrier sensing (listen before speaking): node listens to the channel before transmitting and waits until it is quiet before transmission</li><li>Collision detection (stop talking if someone else begins talking): node listens to the channel while transmitting and stops if there is interference.
<img src=https://i.imgur.com/6ebTVjn.png width=auto alt></li></ul><a href=#taking-turns><h3 id=taking-turns><span class=hanchor arialabel=Anchor># </span>Taking turns</h3></a><p>Each node take turns to transmit some data.</p><ul><li>Polling: a master node polls each node in a round robin fashion to tell them when and how much they can transmit.</li><li>Token passing: each node passes a token to another in a fixed order.</li></ul><a href=#link-layer-addressing><h2 id=link-layer-addressing><span class=hanchor arialabel=Anchor># </span>Link layer addressing</h2></a><p>The link layer requires its own addresses (MAC address) in order to forward datagrams to the correct network adapter. Each MAC address is unique no matter the location, unlike
<a href=/Notes/Internet-Protocol/ rel=noopener class=internal-link data-src=/Notes/Internet-Protocol/>IP addresses</a> which change depending on the network the host is connected to.</p><p><em>Why link layer address + network layer address (IP)</em>?: the network is not meant for just IP, without MAC addresses, it cannot easily support other protocols.</p><a href=#address-resolution-protocol-arp><h3 id=address-resolution-protocol-arp><span class=hanchor arialabel=Anchor># </span>Address Resolution Protocol (ARP)</h3></a><p>When a host wants to send a datagram to another over IP, it must give the IP datagram and the destination MAC address. ARP is used to determine the MAC address given an IP address <strong>on the same LAN or subnet</strong>.
<img src=https://i.imgur.com/Dt0njq9.png width=auto alt>
What if there is no entry in the ARP table for a desired destination?</p><ol><li>Sender construct ARP packet and indicate to use the MAC broadcast address <code>FF-FF-FF-FF-FF-FF</code> before passing to the adapter (consequently, this also reaches any other connected switches, populating their address tables)</li><li>Adapter encapsulates the packet into the link layer frame and transmits</li><li>Each adapter on the subnet passes the frame to its own ARP module which checks if the destination IP is its own. If it is, sends the packet back with the desired mapping</li></ol><a href=#sending-across-different-subnets><h4 id=sending-across-different-subnets><span class=hanchor arialabel=Anchor># </span>Sending across different subnets</h4></a><p>ARP can only be used to obtain MAC addresses of IP addresses on the same subnet. To send a packet outside:</p><ol><li>Sender construct the datagram with the IP address of the final destination but the destination MAC address of the router interface.</li><li>Router deconstructs the datagram (because its own MAC address was found), and forwards the datagram to the MAC address of the final destination IP address (obtained with ARP) using its forwarding table.</li></ol><a href=#link-layer-protocols><h2 id=link-layer-protocols><span class=hanchor arialabel=Anchor># </span>Link Layer Protocols</h2></a><a href=#ethernet><h3 id=ethernet><span class=hanchor arialabel=Anchor># </span>Ethernet</h3></a><ul><li>Unreliable: ethernet drops frames which do not pass the CRC check without sending any acknowledgements. The layer above implements reliability while Ethernet transmits unawares of whether it is a retransmission or not.</li><li>Connectionless: no handshaking required
An ethernet frame:
<img src=https://i.imgur.com/JP5CjY8.png width=auto alt></li><li>Preamble: used to synchronise clock rates between nodes</li><li>Destination/Source address: a MAC address</li><li>Type: identifier for the type of network protocol it is meant for</li><li>CRC: used for detecting bit errors in the frame</li></ul><a href=#link-layer-switches><h2 id=link-layer-switches><span class=hanchor arialabel=Anchor># </span>Link Layer Switches</h2></a><p>A switch receives incoming link-layer frames and forwards them onto outgoing links.</p><a href=#forwarding-and-filtering><h3 id=forwarding-and-filtering><span class=hanchor arialabel=Anchor># </span>Forwarding and filtering</h3></a><p>Filtering determines whether a frame should be forwarded or dropped
Forwarding takes the frame&rsquo;s destination MAC address and forwards it to the interface. This is unlike a
<a href=/Notes/Building-Blocks-of-the-Internet/ rel=noopener class=internal-link data-src=/Notes/Building-Blocks-of-the-Internet/>router which forwards based on IP addresses</a>
Switch table:
<img src=https://i.imgur.com/5jsOdlt.png width=auto alt>
The switch table is built automatically without any intervention:</p><ol><li>Switch table is initially empty</li><li>For each incoming frame received on an interface, store the MAC address of the frame&rsquo;s source address, interface which it arrived and the current time</li><li>Delete address if no frame received with that address as its source after some period of time
Elimination of collisions: a switch buffers frames and never transmits more than 1 frame on a segment at any 1 time. This means that no collision can occur and the
<a href=/Notes/Link-Layer/ rel=noopener class=internal-link data-src=/Notes/Link-Layer/>Multiple Access Problem</a> is solved.</li></ol></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/Notes/Link-Layer/ data-ctx="Multiple Access Problem" data-src=/Notes/Link-Layer class=internal-link>Link Layer</a></li><li><a href=/Notes/Virtual-Networks/ data-ctx=Ethernet data-src=/Notes/Virtual-Networks class=internal-link>Virtual Networks</a></li><li><a href=/Notes/Wireless-Networks/ data-ctx=TDM data-src=/Notes/Wireless-Networks class=internal-link>Wireless Networks</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://www.brendanang.dev/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Brendan Ang using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://www.brendanang.dev/>Home</a></li><li><a href=https://github.com/bbawj>Github</a></li></ul></footer></div></div></body></html>