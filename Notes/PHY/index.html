<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=description content="PHY What&rsquo;s a PHY? Physical Layer in the OSI reference model, and refers to the devices required to implement the functions of the physical layer."><title>PHY
</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://www.brendanang.dev//icon.png><link href=https://www.brendanang.dev/styles.c6adaa3b473914a38283f492dfdbcb76.min.css rel=stylesheet><link href=https://www.brendanang.dev/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://www.brendanang.dev/js/darkmode.f4d43c22d05773345705b5a308888af6.min.js></script><script src=https://www.brendanang.dev/js/util.fa8e74b4065b97e6980a72cc472e436f.min.js></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script><script src=https://unpkg.com/@floating-ui/core@0.7.3></script><script src=https://unpkg.com/@floating-ui/dom@0.5.4></script><script src=https://www.brendanang.dev/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script><script src=https://www.brendanang.dev/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script><script src=https://www.brendanang.dev/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script><script src=https://www.brendanang.dev/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script><script>const SEARCH_ENABLED=!1,PRODUCTION=!0,BASE_URL="https://www.brendanang.dev/",fetchData=Promise.all([fetch("https://www.brendanang.dev/indices/linkIndex.84a6714a5001f23f619a6012b456b34d.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://www.brendanang.dev/indices/contentIndex.61de53cbb96862628149d53bfdffe9d4.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://www.brendanang.dev",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://www.brendanang.dev",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{"â€™":"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/www.brendanang.dev\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script><script defer src=https://www.brendanang.dev/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://www.brendanang.dev/>Brendan Ang</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg>
</label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>PHY</h1><p class=meta>Last updated
Nov 18, 2024
<a href=https://github.com/bbawj/site/Notes/PHY.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#10bt1s-8023cg>10BT1S 802.3cg</a><ol><li><a href=#4b5b-encoding>4B/5B Encoding</a></li></ol></li><li><a href=#ieee-8023bp>IEEE 802.3bp</a><ol><li><a href=#transmit>Transmit</a></li><li><a href=#receive>Receive</a></li><li><a href=#link-synchronization>Link Synchronization</a></li><li><a href=#pma-training>PMA Training</a></li></ol></li></ol><ol><li><a href=#8023-cg>802.3 cg</a><ol><li><a href=#differential-manchester-encoding-dme>Differential Manchester Encoding (DME)</a></li></ol></li><li><a href=#8023bp>802.3bp</a><ol><li><a href=#txrx>Tx/Rx</a></li><li><a href=#phy-control>PHY Control</a></li></ol></li></ol></nav></details></aside><a href=#phy><h1 id=phy><span class=hanchor arialabel=Anchor># </span>PHY</h1></a><blockquote><p>What&rsquo;s a PHY?
Physical Layer in the OSI reference model, and refers to the devices required to implement the functions of the physical layer. The role of PHY is to perform signal conversion so that the signal can be sent to the opposite device correctly.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020241210133151.png width=auto alt></p></blockquote><a href=#pcs><h1 id=pcs><span class=hanchor arialabel=Anchor># </span>PCS</h1></a><p>This dude connects the GMII to the
<a rel=noopener class="internal-link broken" data-src=#PMA>PMA</a>.</p><p>Functions:</p><ul><li>Reset</li><li>Transmit</li><li>Receive</li></ul><a href=#10bt1s-8023cg><h2 id=10bt1s-8023cg><span class=hanchor arialabel=Anchor># </span>10BT1S 802.3cg</h2></a><p>Simple case of the 10BT1s:
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020241210135051.png width=auto alt></p><a href=#4b5b-encoding><h3 id=4b5b-encoding><span class=hanchor arialabel=Anchor># </span>4B/5B Encoding</h3></a><p>Encodes MII data nibbles to/from 4B/5B.</p><ul><li>Each symbol <code>tx_sym</code> is conveyed to the PMA through the PMA_UNITDATA.request service primitive, where tx_sym is a 5B symbol.</li><li>Upon assertion of TX_EN, the PCS Transmit function passes two SYNC symbols to the PMA, followed by two SSD symbols that replace the first 16 bits of the packet preamble. Following the second SSD, TXD&lt;3:0> is encoded into 5B symbols until TX_EN is deasserted.</li><li>Following the deassertion of TX_EN, the PCS Transmit generates a special code ESD. When there is no transmit error, ESD is followed by ESDOK. When there is a transmit error, ESD is followed by ESDERR. When a jabber condition is detected, ESD is followed by ESDJAB
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020241210140003.png width=auto alt></li></ul><a href=#ieee-8023bp><h2 id=ieee-8023bp><span class=hanchor arialabel=Anchor># </span>IEEE 802.3bp</h2></a><p>There are differences across different standards. Below is a description of the 1000 Mbit/s ethernet standard.
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020241111164216.png width=auto alt>
PCS operation is primarily controlled by a few indication messages generated by the PMA
More complicated case with 1000BT1:
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020240918125705.png width=auto alt></p><ul><li>TXMODE:<ul><li>SEND_N: transmit the symbols received from the GMII data stream</li><li>SEND_I: idle sequence</li><li>SEND_T: training mode sequence {-1, +1}</li><li>SEND_Z: send zeroes</li></ul></li><li>CONFIG: specifies whether the PHY is in MASTER or SLAVE mode</li></ul><a href=#transmit><h3 id=transmit><span class=hanchor arialabel=Anchor># </span>Transmit</h3></a><a href=#encoding><h4 id=encoding><span class=hanchor arialabel=Anchor># </span>Encoding</h4></a><p>Data is encoded into 80/81 bit blocks.</p><a href=#block-structure><h4 id=block-structure><span class=hanchor arialabel=Anchor># </span>Block structure:</h4></a><p>Each block is 81 bits.</p><ul><li>BIT(0) header: 0 = data. 1 = control</li><li>BIT(1-80): payload</li></ul><a href=#data-block><h4 id=data-block><span class=hanchor arialabel=Anchor># </span>Data Block</h4></a><p>It is just 10 data octets thats all.</p><a href=#control-block><h4 id=control-block><span class=hanchor arialabel=Anchor># </span>Control Block</h4></a><p><img src=https://www.brendanang.dev//Pics/802.3%202024-11-11%2016.29.15.excalidraw.svg width=auto alt>
%%
<a rel=noopener class="internal-link broken" data-src=Pics/802.3%202024-11-11%2016.29.15.excalidraw>ðŸ–‹ Edit in Excalidraw</a>, and the
<a rel=noopener class="internal-link broken" data-src=Pics/802.3%202024-11-11%2016.29.15.excalidraw.dark.svg>dark exported image</a>%%
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020241111163743.png width=auto alt></p><ul><li>Idle (Normal Inter-frame) control characters are transmitted when TX_EN is not asserted and no other supported control code is present at the GMII</li><li>Error: TX_ER and TX_EN are both asserted. Error allows physical sublayers such as the PCS to propagate received errors.</li><li>LP_IDLE: TX_EN is not asserted, TX_ER is asserted, and TXD&lt;7:0> = 0x1. A continuous stream of LPI control characters is used to maintain a link in the LPI transmit mode. Idle control characters are used to transition from the LPI transmit mode to the normal power mode. If EEE is not supported, then LP_IDLE shall be converted to IDLE.</li></ul><ol><li>Stream of 4050 bits (PHY Frame) taken from TXD&lt;7:0>:<ol><li>45 of such blocks</li><li>9 bits OAM data</li><li>396 bits
<a href=/Notes/Reed-Solomon/ rel=noopener class=internal-link data-src=/Notes/Reed-Solomon/>Reed-Solomon</a> forward error correction</li></ol></li><li>15 bit side stream scrambler</li><li>Each group of 3 bits is converted to 2
<a href=/Notes/PAM/ rel=noopener class=internal-link data-src=/Notes/PAM/>PAM</a> symbols (3B2T) for a total of $4500/3*2 = 2700$ symbols</li><li>Pass to PMA through a &ldquo;UNITDATA.request&rdquo;
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020240923160903.png width=auto alt></li></ol><a href=#receive><h3 id=receive><span class=hanchor arialabel=Anchor># </span>Receive</h3></a><a href=#side-stream-scrambling><h4 id=side-stream-scrambling><span class=hanchor arialabel=Anchor># </span>Side-stream Scrambling</h4></a><p>Scrambling is important for good
<a href=/Notes/PAM/ rel=noopener class=internal-link data-src=/Notes/PAM/>waveform characteristics</a>. One way to do this is with
<a href=https://en.wikipedia.org/wiki/Linear-feedback_shift_register rel=noopener>linear feedback shift registers</a>.</p><p>The bits stored in the shift register delay line at time n are denoted by $Scr_n[32:0]$. At each symbol period, the shift register is advanced by one bit, and one new bit represented by $Scr_n[0]$ is generated:</p><a href=#link-synchronization><h3 id=link-synchronization><span class=hanchor arialabel=Anchor># </span>Link Synchronization</h3></a><a href=#pma-training><h3 id=pma-training><span class=hanchor arialabel=Anchor># </span>PMA Training</h3></a><p>The 2 PHYs undergo a &ldquo;training&rdquo; sequence to exchange information about the capabilities and scrambler seed. Training mode signals are PAM2 {-1, +1}, a PHY frame is thus 2700 bits rather than 4050 in data mode.</p><a href=#training-scrambler-function><h4 id=training-scrambler-function><span class=hanchor arialabel=Anchor># </span>Training scrambler function</h4></a><p><img src=https://www.brendanang.dev//Pics/Pasted%20image%2020240924133115.png width=auto alt>
Master: $g_{M(x)}=1+x^{13}+x^{33}$
Slave: $g_{s(x)} = 1+x^{20}+x^{33}$</p><a href=#encoding-1><h4 id=encoding-1><span class=hanchor arialabel=Anchor># </span>Encoding</h4></a><p>Partial PHY Frame: here we define a partial PHY frame to be 1 every 180 bits
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020240924140839.png width=auto alt>
The bit Sn is mapped to the transmit symbol Tn as follows: if Sn = 0 then Tn = +1, if Sn = 1 then Tn = â€“1</p><a href=#pma><h1 id=pma><span class=hanchor arialabel=Anchor># </span>PMA</h1></a><p>This dude streams the data from PCS onto the twisted-pair cable.
Functions:</p><ul><li>tx/rx</li><li>clock recovery</li><li>link monitor</li><li>PHY Control functions.</li></ul><a href=#8023-cg><h2 id=8023-cg><span class=hanchor arialabel=Anchor># </span>802.3 cg</h2></a><p><img src=https://www.brendanang.dev//Pics/Pasted%20image%2020241210133733.png width=auto alt>
The PMA encodes tx_sym from PCS, LSB first, into a DME stream over the wire pair BI_DA</p><a href=#differential-manchester-encoding-dme><h3 id=differential-manchester-encoding-dme><span class=hanchor arialabel=Anchor># </span>Differential Manchester Encoding (DME)</h3></a><p>A type of encoding whereby the polarity does not matter, but rather, only the presence or absence of a transition during the bit interval matters.
In 10BT1S:</p><ul><li>bit interval is 80ns</li><li>a transition in the middle (40ns) = logic 1, else = logic 0
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020241210141716.png width=auto alt></li></ul><a href=#8023bp><h2 id=8023bp><span class=hanchor arialabel=Anchor># </span>802.3bp</h2></a><a href=#txrx><h3 id=txrx><span class=hanchor arialabel=Anchor># </span>Tx/Rx</h3></a><p>The PMA Transmit function comprises a transmitter to generate a three level modulated signal on the single twisted-pair copper cable.</p><p>The PMA Receive function comprises a receiver for PAM3 signals on the twisted-pair. PMA Receive contains the circuits necessary to both detect symbol sequences from the signals received at the MDI over receive pair and to present these sequences to the PCS Receive function. The PMA translates the signals received on the twisted-pair into the PMA_UNITDATA.indication parameter rx_symb.</p><a href=#phy-control><h3 id=phy-control><span class=hanchor arialabel=Anchor># </span>PHY Control</h3></a><p>PHY Control generates the control actions that are needed to bring the PHY into a mode of operation during which frames can be exchanged with the link partner.</p><p>Exchanged between link partners with a 12-octet <em>InfoField</em>, which is XORed with the first 96 bits of the 15th partial PHY frame (bits 2520 to 2615) of the PHY frame
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020240924142521.png width=auto alt>
<img src=https://www.brendanang.dev//Pics/Pasted%20image%2020240924142538.png width=auto alt></p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://www.brendanang.dev/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Brendan Ang using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2025</p><ul><li><a href=https://www.brendanang.dev/>Home</a></li><li><a href=https://github.com/bbawj>Github</a></li></ul></footer></div></div></body></html>