<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Application Layer Network Application Architectures  Examples:
 Webmail Examples: File sharing Bittorrent  CS vs P2P File Distribution  Client Server  The server must transmit one copy of the file to each of the N peers."><title>Application Layer</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://www.brendanang.dev//icon.png><link href=https://www.brendanang.dev/styles.c6adaa3b473914a38283f492dfdbcb76.min.css rel=stylesheet><link href=https://www.brendanang.dev/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://www.brendanang.dev/js/darkmode.f4d43c22d05773345705b5a308888af6.min.js></script>
<script src=https://www.brendanang.dev/js/util.fa8e74b4065b97e6980a72cc472e436f.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://www.brendanang.dev/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://www.brendanang.dev/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://www.brendanang.dev/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://www.brendanang.dev/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,PRODUCTION=!0,BASE_URL="https://www.brendanang.dev/",fetchData=Promise.all([fetch("https://www.brendanang.dev/indices/linkIndex.ecfa414e1282826cc43a2473116a81b9.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://www.brendanang.dev/indices/contentIndex.d49fde9522c188996a6772cce3033c34.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://www.brendanang.dev",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://www.brendanang.dev",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/www.brendanang.dev\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://www.brendanang.dev/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://www.brendanang.dev/>Brendan Ang</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Application Layer</h1><p class=meta>Last updated
Jan 18, 2023
<a href=https://github.com/bbawj/site/Notes/Application%20Layer.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#network-application-architectures>Network Application Architectures</a><ol><li><a href=#cs-vs-p2p-file-distribution>CS vs P2P File Distribution</a></li></ol></li><li><a href=#process-communication>Process Communication</a><ol><li><a href=#addressing-processes>Addressing Processes</a></li><li><a href=#transport-service-requirements>Transport Service Requirements</a></li></ol></li><li><a href=#application-layer-protocols>Application Layer Protocols</a><ol><li><a href=#http>HTTP</a></li><li><a href=#electronic-mail>Electronic Mail</a></li><li><a href=#dns>DNS</a></li><li><a href=#bittorrent>BitTorrent</a></li><li><a href=#distributed-hash-table>Distributed Hash Table</a></li></ol></li><li><a href=#socket-programming>Socket Programming</a><ol><li><a href=#tcp>TCP</a></li><li><a href=#encodingdecoding>Encoding/Decoding</a></li><li><a href=#helpful-java-classes>Helpful Java classes</a></li></ol></li></ol></nav></details></aside><a href=#application-layer><h1 id=application-layer><span class=hanchor arialabel=Anchor># </span>Application Layer</h1></a><a href=#network-application-architectures><h2 id=network-application-architectures><span class=hanchor arialabel=Anchor># </span>Network Application Architectures</h2></a><p><img src=https://i.imgur.com/9xLCsuj.png width=auto alt=500>
Examples:</p><ul><li>Webmail
<img src=https://i.imgur.com/mzwgHPb.png width=auto alt=500>
Examples:</li><li>File sharing</li><li>Bittorrent</li></ul><a href=#cs-vs-p2p-file-distribution><h3 id=cs-vs-p2p-file-distribution><span class=hanchor arialabel=Anchor># </span>CS vs P2P File Distribution</h3></a><p><img src=https://i.imgur.com/0pCgt40.png width=auto alt=500></p><a href=#client-server><h4 id=client-server><span class=hanchor arialabel=Anchor># </span>Client Server</h4></a><ul><li>The server must transmit one copy of the file to each of the N peers. Thus the server must transmit NF bits. Since the server’s upload rate is us, the time to distribute the file must be at least NF/us.</li><li>Let $d_{min}$ denote the download rate of the peer with the lowest download rate, that is, $d_{min} = min {d1, dp, . . . , dN}$. The peer with the lowest download rate cannot obtain all F bits of the file in less than $F/d_{min}$ seconds. Thus the minimum distribution time is at least $F/d_{min}$.
$$D_{CS} \ge max{\frac{NF}{u_s},\frac{F}{d_{min}}}$$
From this we can observe that distribution time increases linearly with the number of peers N.</li></ul><a href=#p2p><h4 id=p2p><span class=hanchor arialabel=Anchor># </span>P2P</h4></a><ul><li>To get this file into the community of peers, the server must send each bit of the file at least once into its access link. Thus, the minimum distribution time is at least F/us.</li><li>The peer with the lowest download rate cannot obtain all F bits of the file in less than $F/d_{min}$ seconds.</li><li>The total upload capacity of the system as a whole is equal to the upload rate of the server plus the upload rates of each of the individual peers, that is, $u_{total} = u_s + u_1 + &mldr; + u_N$. The system must upload F bits to each of the N peers, thus delivering a total of NF bits. The minimum distribution time is also at least $NF/(u_s + u_1 + &mldr; + uN)$.
<img src=https://i.imgur.com/DwxC3nt.png width=auto alt=500></li></ul><a href=#process-communication><h2 id=process-communication><span class=hanchor arialabel=Anchor># </span>Process Communication</h2></a><p>Network applications on different hosts need a way to communicate with each other (sometimes across different operating systems).
Client: process that initiates the communication
Server: the other part of the pair</p><a href=#addressing-processes><h3 id=addressing-processes><span class=hanchor arialabel=Anchor># </span>Addressing Processes</h3></a><p>To receive messages, a process must have an identifier. Each host has a unique IP address but this is not enough as there are many processes which can be running on the same host. A <strong>port number</strong> is needed to identify the receiving process/socket:
HTTP server: 80
Mail server: 25</p><a href=#transport-service-requirements><h3 id=transport-service-requirements><span class=hanchor arialabel=Anchor># </span>Transport Service Requirements</h3></a><ol><li>Data integrity: the amount of fault tolerance an application needs</li><li>Throughput: rate which sending process can deliver bits to receiver. Because communication lines are shared, some bandwidth-sensitive applications (such as multimedia) may need a set throughout value.</li><li>Timing: the amount of latency. An example guarantee might be that every bit that the sender pumps into the socket arrives at the receiver’s socket no more than 100 msec later. Such a service would be appealing to interactive real-time applications, such as multiplayer games.</li><li>Security: encryption</li></ol><a href=#application-layer-protocols><h2 id=application-layer-protocols><span class=hanchor arialabel=Anchor># </span>Application Layer Protocols</h2></a><p>An application layer protocol defines:</p><ul><li>The types of messages exchanged, for example, request messages and response messages</li><li>The syntax of the various message types, such as the fields in the message and how the fields are delineated</li><li>The semantics of the fields, that is, the meaning of the information in the fields</li><li>Rules for determining when and how a process sends messages and responds to messages</li></ul><a href=#http><h3 id=http><span class=hanchor arialabel=Anchor># </span>HTTP</h3></a><p>The Web&rsquo;s application layer protocol is
<a href=/Notes/HTTP/ rel=noopener class=internal-link data-src=/Notes/HTTP/>HTTP</a>.</p><a href=#electronic-mail><h3 id=electronic-mail><span class=hanchor arialabel=Anchor># </span>Electronic Mail</h3></a><p>A typical message starts its journey in the sender’s user agent, travels to the sender’s mail server, and travels to the recipient’s mail server, where it is deposited in the recipient’s mailbox. When Bob wants to access the messages in his mailbox, the mail server containing his mailbox authenticates Bob (with usernames and passwords)
<img src=https://i.imgur.com/iVbsCx3.png width=auto alt>
Each user agent uses a separate mail server rather than directly connecting with each other such that there is some recourse (able to keep retrying to send a message) when the destination is currently unreachable.
<img src=https://i.imgur.com/jm02rCR.png width=auto alt></p><a href=#smtp><h4 id=smtp><span class=hanchor arialabel=Anchor># </span>SMTP</h4></a><p>The heart of Internet electronic mail is <a href=/Notes/SMTP rel=noopener class=internal-link data-src=/Notes/SMTP>SMTP</a>, which allows for the transfer of messages.</p><a href=#mail-access-protocol><h4 id=mail-access-protocol><span class=hanchor arialabel=Anchor># </span>Mail Access Protocol</h4></a><p>SMTP is a push protocol. Mail access protocols are needed to retrieve mail from the mail server via a pull operation:</p><ul><li><a href=/Notes/POP3 rel=noopener class=internal-link data-src=/Notes/POP3>POP3</a></li></ul><a href=#dns><h3 id=dns><span class=hanchor arialabel=Anchor># </span>DNS</h3></a><p>Many application protocols are built on top of <a href=/Notes/DNS rel=noopener class=internal-link data-src=/Notes/DNS>DNS</a>.</p><a href=#bittorrent><h3 id=bittorrent><span class=hanchor arialabel=Anchor># </span>BitTorrent</h3></a><p>The most popular P2P protocol for file distribution is <a href=/Notes/BitTorrent rel=noopener class=internal-link data-src=/Notes/BitTorrent>BitTorrent</a></p><a href=#distributed-hash-table><h3 id=distributed-hash-table><span class=hanchor arialabel=Anchor># </span>Distributed Hash Table</h3></a><p>Another application of P2P is a <a href=/Notes/Distributed-Hash-Table rel=noopener class=internal-link data-src=/Notes/Distributed-Hash-Table>Distributed Hash Table</a></p><a href=#socket-programming><h2 id=socket-programming><span class=hanchor arialabel=Anchor># </span>Socket Programming</h2></a><p>How are network applications actually created? Processes running on different machines communicate with each other through sockets.
<img src=https://i.imgur.com/m6lthQk.png width=auto alt></p><a href=#tcp><h3 id=tcp><span class=hanchor arialabel=Anchor># </span>TCP</h3></a><p>Network applications may communicate through TCP, and hence the connection socket must support TCP. TCP provides a reliable <strong>byte-stream</strong> service:
<img src=https://i.imgur.com/2CO9GiP.png width=auto alt>
Basic byte I/O classes in Java
<img src=https://i.imgur.com/zpjfz02.png width=auto alt></p><a href=#client><h4 id=client><span class=hanchor arialabel=Anchor># </span>Client</h4></a><p>The client must perform the following operations:</p><ol><li>Open TCP connection to the server</li><li>Send data</li><li>Receive data on the connection</li><li>Close the connection
<img src=https://i.imgur.com/nisae4A.png width=auto alt></li></ol><a href=#server><h4 id=server><span class=hanchor arialabel=Anchor># </span>Server</h4></a><p><img src=https://i.imgur.com/WrmIrHf.png width=auto alt>
<img src=https://i.imgur.com/AfPgXhj.png width=auto alt></p><p><img src=https://i.imgur.com/qqHEpRB.png width=auto alt></p><a href=#encodingdecoding><h3 id=encodingdecoding><span class=hanchor arialabel=Anchor># </span>Encoding/Decoding</h3></a><p>To transfer a string between two processes over the network, we must decide how to represent the string as a sequence of bytes.</p><a href=#ascii><h4 id=ascii><span class=hanchor arialabel=Anchor># </span>ASCII</h4></a><p><img src=https://www.brendanang.dev//Pics/Pasted%20image%2020230120000437.png width=auto alt></p><a href=#utf-8><h4 id=utf-8><span class=hanchor arialabel=Anchor># </span>UTF-8</h4></a><ul><li>Unicode Transformation Format – 8-bit</li><li>Variable length encoding</li><li>Up to four bytes per symbol</li><li>The first 128 are the same as for ASCII</li><li>Backwards compatibility – ASCII text is also valid UTF-8</li><li>Dominating format on the Web
<img src=https://i.imgur.com/nQ6XDpH.png width=auto alt></li></ul><a href=#helpful-java-classes><h3 id=helpful-java-classes><span class=hanchor arialabel=Anchor># </span>Helpful Java classes</h3></a><p><img src=https://i.imgur.com/puWh81X.png width=auto alt></p><p><img src=https://i.imgur.com/kudOIAw.png width=auto alt></p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://www.brendanang.dev/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Brendan Ang using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://www.brendanang.dev/>Home</a></li><li><a href=https://github.com/bbawj>Github</a></li></ul></footer></div></div></body></html>