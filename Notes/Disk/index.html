<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Disk Disk Mechanics A disk is made up of multiple cylinders (platters) each with a set of tracks  [!NOTE] Each platter consists of 2 surfaces which data can be read/written"><title>Disk</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://www.brendanang.dev//icon.png><link href=https://www.brendanang.dev/styles.d6bb7b63f7a87efb30e2484b46dbc6a3.min.css rel=stylesheet><link href=https://www.brendanang.dev/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://www.brendanang.dev/js/darkmode.f4d43c22d05773345705b5a308888af6.min.js></script>
<script src=https://www.brendanang.dev/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://www.brendanang.dev/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://www.brendanang.dev/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://www.brendanang.dev/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://www.brendanang.dev/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://www.brendanang.dev/",fetchData=Promise.all([fetch("https://www.brendanang.dev/indices/linkIndex.769c61c53417a6ca135086d7087a47e6.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://www.brendanang.dev/indices/contentIndex.7b571d12b7007f226016415f66f85555.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://www.brendanang.dev",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://www.brendanang.dev",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/www.brendanang.dev\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://www.brendanang.dev/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://www.brendanang.dev/>Brendan Ang</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Disk</h1><p class=meta>Last updated
Nov 8, 2022
<a href=https://github.com/bbawj/site/Notes/Disk.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#disk-mechanics>Disk Mechanics</a></li><li><a href=#disk-access>Disk Access</a><ol><li><a href=#seek-time>Seek time</a></li><li><a href=#rotational-delay>Rotational Delay</a></li><li><a href=#transfer-time>Transfer Time</a></li><li><a href=#random-disk-access>Random Disk Access</a></li><li><a href=#sequential-disk-access>Sequential Disk Access</a></li></ol></li><li><a href=#disk-scheduling>Disk Scheduling</a><ol><li><a href=#first-come-first-serve>First Come First Serve</a></li><li><a href=#shortest-seek-time-first>Shortest Seek Time First</a></li><li><a href=#elevator--scan>Elevator / Scan</a></li><li><a href=#c-scan>C-Scan</a></li><li><a href=#c-look>C-Look</a></li><li><a href=#comparison>Comparison</a></li></ol></li><li><a href=#disk-management>Disk Management</a></li><li><a href=#disk-reliability>Disk Reliability</a><ol><li><a href=#striping>Striping</a></li><li><a href=#mirroring>Mirroring</a></li><li><a href=#redundant-array-of-independent-disks-raid>Redundant Array of Independent Disks (RAID)</a></li></ol></li><li><a href=#storing-relational-data>Storing relational data</a><ol><li><a href=#fields-to-record>Fields to Record</a></li><li><a href=#record-to-block>Record to Block</a></li></ol></li><li><a href=#practice-problems>Practice Problems</a></li></ol></nav></details></aside><a href=#disk><h1 id=disk><span class=hanchor arialabel=Anchor># </span>Disk</h1></a><a href=#disk-mechanics><h2 id=disk-mechanics><span class=hanchor arialabel=Anchor># </span>Disk Mechanics</h2></a><p>A disk is made up of multiple cylinders (platters) each with a set of tracks
<img src=https://i.imgur.com/qm4b2xs.png width=auto alt></p><blockquote class=note-callout><p>Each platter consists of 2 surfaces which data can be read/written</p></blockquote><p>Disk capacity calculation:
<img src=https://i.imgur.com/wMSn43v.png width=auto alt></p><a href=#disk-access><h2 id=disk-access><span class=hanchor arialabel=Anchor># </span>Disk Access</h2></a><blockquote class=important-callout><p>Data can only be accessed in units of blocks. Each block must be loaded from the disk into main memory. Only in main memory can we individually address each word.</p></blockquote><p><img src=https://i.imgur.com/EXdyzUk.png width=auto alt></p><a href=#seek-time><h3 id=seek-time><span class=hanchor arialabel=Anchor># </span>Seek time</h3></a><p>Seek time depends on the total number of cylinders. However, it is not linear as the time taken is also dependent on the acceleration of the head.
<img src=https://i.imgur.com/u4VI4Vj.png width=auto alt></p><a href=#rotational-delay><h3 id=rotational-delay><span class=hanchor arialabel=Anchor># </span>Rotational Delay</h3></a><p>$$t = \frac{Angle}{Rotation \\ Speed}$$
On average the rotational delay is 0.5 * t</p><a href=#transfer-time><h3 id=transfer-time><span class=hanchor arialabel=Anchor># </span>Transfer Time</h3></a><p>$$t = \frac{block\\ size}{transfer\\ rate}$$</p><a href=#random-disk-access><h3 id=random-disk-access><span class=hanchor arialabel=Anchor># </span>Random Disk Access</h3></a><p>Average seek time: let i be the cylinder of the block just accessed and j be the cylinder of the block to be accessed, N be the total number of cylinders
$$t = \frac{\sum_{i=1}^{N}\sum_{j=1}^{N}seektime(i-j)}{N^2}$$</p><a href=#sequential-disk-access><h3 id=sequential-disk-access><span class=hanchor arialabel=Anchor># </span>Sequential Disk Access</h3></a><p>Average seek time is approximately 0 as the block to be accessed is likely to be in same cylinder
Average rotational delay is approximately 0 as the head points to the next block after current access
<img src=https://i.imgur.com/M0ylOeH.png width=auto alt></p><a href=#disk-scheduling><h2 id=disk-scheduling><span class=hanchor arialabel=Anchor># </span>Disk Scheduling</h2></a><a href=#first-come-first-serve><h3 id=first-come-first-serve><span class=hanchor arialabel=Anchor># </span>First Come First Serve</h3></a><p><img src=https://i.imgur.com/pvvLUwZ.png width=auto alt></p><a href=#shortest-seek-time-first><h3 id=shortest-seek-time-first><span class=hanchor arialabel=Anchor># </span>Shortest Seek Time First</h3></a><p>Similar to
<a href=/Notes/Process-scheduling/ rel=noopener class=internal-link data-src=/Notes/Process-scheduling/></a>. Selects the request with the minimum seek time
from the current head position. It is susceptible to starvation.
<img src=https://i.imgur.com/GUJ7jRj.png width=auto alt></p><a href=#elevator--scan><h3 id=elevator--scan><span class=hanchor arialabel=Anchor># </span>Elevator / Scan</h3></a><p>Disk arm starts at one end of the disk, and moves toward the other end, servicing requests until it gets to the other end of the disk, where the head movement is reversed:
<img src=https://i.imgur.com/0zMIHDP.png width=auto alt></p><a href=#c-scan><h3 id=c-scan><span class=hanchor arialabel=Anchor># </span>C-Scan</h3></a><p>Variant of elevator: after reversing direction, may not need to service requests immediately as more requests would be on the other end (uniform distribution)
<img src=https://i.imgur.com/6kbfmik.png width=auto alt></p><a href=#c-look><h3 id=c-look><span class=hanchor arialabel=Anchor># </span>C-Look</h3></a><p>Rather than reversing only when reaching one end of the disk, reverse after servicing the last request in the current direction.
<img src=https://i.imgur.com/SV3sASO.png width=auto alt></p><a href=#comparison><h3 id=comparison><span class=hanchor arialabel=Anchor># </span>Comparison</h3></a><ul><li>SSTF is common and has a natural appeal</li><li>SCAN and C-SCAN (or LOOK and C-LOOK) perform better for systems that place a heavy load on the disk (since starvation is unlikely)</li><li>Performance depends on the number and types of requests</li><li><a href=/Notes/File-Systems/ rel=noopener class=internal-link data-src=/Notes/File-Systems/></a> also affect the effectiveness of the algorithm. A linked or indexed file may generate requests wide apart.</li><li>All the discussed algorithms (except for FCFS) do not solve the underlying issue of starvation. e.g. SCAN can be prevented from servicing the requests on the other end if new requests keep arriving at the same place.</li></ul><a href=#disk-management><h2 id=disk-management><span class=hanchor arialabel=Anchor># </span>Disk Management</h2></a><p>Formatting</p><ul><li>Divide the disk into sectors which the controller can read and write
Partitioning</li><li>separating the disk into 1 or more groups of cylinders
Logical formatting</li><li>Making a new file system by creating data structures to support file access across different partitions
<img src=https://i.imgur.com/l1rUNxA.png width=auto alt></li></ul><a href=#disk-reliability><h2 id=disk-reliability><span class=hanchor arialabel=Anchor># </span>Disk Reliability</h2></a><a href=#striping><h3 id=striping><span class=hanchor arialabel=Anchor># </span>Striping</h3></a><p>Uses a group of disks as one storage unit</p><ul><li>Each block is broken into several sub-blocks, with one sub-block stored on each disk</li><li>Time to transfer a block into memory is faster because all sub-blocks are transferred in parallel
<img src=https://i.imgur.com/e1URc4E.png width=auto alt></li></ul><a href=#mirroring><h3 id=mirroring><span class=hanchor arialabel=Anchor># </span>Mirroring</h3></a><p>Keeps a duplicate of each disk by using 2 physical disks in 1 logical disk. If one fails data can still be read by the other.
<img src=https://i.imgur.com/5eWJTR2.png width=auto alt></p><a href=#redundant-array-of-independent-disks-raid><h3 id=redundant-array-of-independent-disks-raid><span class=hanchor arialabel=Anchor># </span>Redundant Array of Independent Disks (RAID)</h3></a><p>Raid 0: Striping
Raid 1: Mirroring
Raid 0 + 1: Mirror of Stripes
<img src=https://i.imgur.com/U1dHjtf.png width=auto alt>
Raid 1 + 0: Strip of Mirror
<img src=https://i.imgur.com/OnqoqHq.png width=auto alt></p><ul><li>A difference occurs if there are at least 6 disks involved.</li><li>Raid 10 has better fault tolerance: allows for disk 1,3,5 to be down and still functional</li><li>Raid 01 degrades to Raid 0 when any disk fails. i.e. Will only be able to read a file from one group.</li></ul><a href=#storing-relational-data><h2 id=storing-relational-data><span class=hanchor arialabel=Anchor># </span>Storing relational data</h2></a><p><img src=https://i.imgur.com/T38v3NN.png width=auto alt></p><a href=#fields-to-record><h3 id=fields-to-record><span class=hanchor arialabel=Anchor># </span>Fields to Record</h3></a><p><img src=https://i.imgur.com/imcZwDT.png width=auto alt></p><p><img src=https://i.imgur.com/sAwIdeR.png width=auto alt></p><a href=#record-to-block><h3 id=record-to-block><span class=hanchor arialabel=Anchor># </span>Record to Block</h3></a><p>There a a few considerations when storing a record into a block</p><a href=#supporting-record-separation><h4 id=supporting-record-separation><span class=hanchor arialabel=Anchor># </span>Supporting record separation</h4></a><p><img src=https://i.imgur.com/e0tWpq7.png width=auto alt></p><a href=#order-of-records><h4 id=order-of-records><span class=hanchor arialabel=Anchor># </span>Order of records</h4></a><p>We can store records in the order of the primary key. Order can be maintained either physically (in memory) or logically (through a pointer)</p><a href=#practice-problems><h2 id=practice-problems><span class=hanchor arialabel=Anchor># </span>Practice Problems</h2></a><p><img src=https://i.imgur.com/bRiV76y.png width=auto alt>
a. 10 + 35 + 20 + 18 + 25 + 3 = 111
b. Order: 11->12->9->16->1->34->36
1+3+7+15+33+2 = 61
c. Order: 11->12->16->34->36->9->1
1+4+18+2+27+8 = 60
<img src=https://i.imgur.com/3Sg3EMf.png width=auto alt>
Total bytes per tuple = 8+17+1+4+4+4+1 = 39
Block contains meta data of 40bytes
a.
Total byte without block meta data: $8\times 1024-40=8152$
Records: $8152\div 39=209.03$
209 records can be stored
b.
Total bytes per tuple:
17 byte character string needs to pad additional 3 bytes: 20 byte
1 byte needs to pad additional 3 bytes: 4 byte
$8+20+4+4+4+4+4=48$ bytes
Records: $8152\div 48 = 169$
169 Records
c.
Total bytes for block header:
$10\times 8 = 80$
Total bytes per tuple:
17 byte character string needs to pad additional 7 bytes: 24 byte
1 byte needs to pad additional 7 bytes: 8 byte
Record header: $2\times 8 + 8 = 24$
$24+8+24+8+8=72$ bytes
Records: $8192-80\div 72 = 112$
112 Records
<img src=https://i.imgur.com/zXULRoB.png width=auto alt>
a. A “sector” is a physical unit of the disk and a “block” is a logical unit, a creation of whatever software system – operation systems or database systems, for example – is using the disk. As we mentioned, it is typical today for blocks to be at least as large as sectors and to consist of one or more sectors. However, there is no reason why a block cannot be a fraction of a sector, with several blocks packed into one sector. In fact, some older systems did use this strategy.</p><p>With the block size increases, the # of blocks to be accessed for a relational table decreases but the transfer time then increases.
b. One block consists of multiple sectors. If these sectors are not sequential, the transfer time will be directly proportional to the RPM which the seek head is able to reach each sector.
<img src=https://i.imgur.com/R6TPaEL.png width=auto alt>
a.
Capacity: $8\times2^{13}\times2^8\times2^9=2^{33}$bytes = 8GB
b.
1 round around the track is 256 sectors and 256 gaps, can be completed in $\frac{1}{3840}min$ or 1/64 seconds
To navigate 1 sector and 1 gap: $\frac{1}{64\times256}=0.061ms$
Min time to 1 sector and 0 gap: $0.061\times0.9=0.0549ms$
Min time for 8 sector and 7 gaps: 0.482ms</p><p>Max rotational delay occurs when we need to traverse 256-8 sectors and gaps to find the block
Max cylinder access occurs when we need to traverse all the tracks
Max time: $0.061\times248+0.482+17.4=33.01ms$
c.
There are 8192 cylinders.
If access is on cylinder 1000: block access time = average rotational delay
If access is on cylinder 1001: block access time = 1 track seek time + avg rotational delay
Average cylinder access: (1000+999&mldr;+0+1+&mldr;+7192)/8192 = 3218
Average cylinder access time: $3218/500+1=7.44ms$
Average rotational delay: $\frac{1}{64\times2}=7.8ms$
Average total block access time: 15.24ms</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/Notes/IO-Subsystem/ data-ctx data-src=/Notes/IO-Subsystem class=internal-link>IO Subsystem</a></li><li><a href=/Notes/Storage/ data-ctx=Disk data-src=/Notes/Storage class=internal-link>Storage</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://www.brendanang.dev/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Brendan Ang using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2022</p><ul><li><a href=https://www.brendanang.dev/>Home</a></li><li><a href=https://github.com/bbawj>Github</a></li></ul></footer></div></div></body></html>